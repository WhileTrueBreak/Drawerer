package application;

import static com.kuka.roboticsAPI.motionModel.BasicMotions.lin;
import static com.kuka.roboticsAPI.motionModel.BasicMotions.linRel;
import static com.kuka.roboticsAPI.motionModel.BasicMotions.positionHold;
import static com.kuka.roboticsAPI.motionModel.BasicMotions.ptp;

import java.util.Arrays;
import java.util.List;
import java.util.concurrent.TimeUnit;

import javax.inject.Inject;
import javax.inject.Named;

import com.kuka.common.ThreadUtil;
import com.kuka.generated.ioAccess.MediaFlangeIOGroup;
import com.kuka.roboticsAPI.applicationModel.RoboticsAPIApplication;
import com.kuka.roboticsAPI.deviceModel.LBR;
import com.kuka.roboticsAPI.geometricModel.CartDOF;
import com.kuka.roboticsAPI.geometricModel.Tool;
import com.kuka.roboticsAPI.geometricModel.World;
import com.kuka.roboticsAPI.motionModel.IMotionContainer;
import com.kuka.roboticsAPI.motionModel.controlModeModel.CartesianImpedanceControlMode;
import com.kuka.task.ITaskLogger;

public class Drawerer extends RoboticsAPIApplication{
	@Inject
	private LBR robot;

	@Inject 
	private Gripper2F gripper2F1;

	@Inject
	private MediaFlangeIOGroup mF;

	@Inject
	@Named("RobotiqGripper")
	private Tool gripper;

	@Inject
	private ITaskLogger logger;
	
	private CartesianImpedanceControlMode springRobot;
	private List<Position> path;
	
	@Override
	public void initialize() {
		
		// Initializes the boing boing
		springRobot = new CartesianImpedanceControlMode(); 
		
		// Set stiffness

		// TODO: Stiff in every direction except plane perpendicular to flange
		springRobot.parametrize(CartDOF.X).setStiffness(50);
		springRobot.parametrize(CartDOF.Y).setStiffness(5000);
		springRobot.parametrize(CartDOF.Z).setStiffness(5000);

		// Stiff rotation
		springRobot.parametrize(CartDOF.C).setStiffness(300);
		springRobot.parametrize(CartDOF.B).setStiffness(300);
		springRobot.parametrize(CartDOF.A).setStiffness(300);
		springRobot.setReferenceSystem(World.Current.getRootFrame());
		springRobot.parametrize(CartDOF.ALL).setDamping(0.4);
		
		// Inits the Robot
		gripper.attachTo(robot.getFlange());
		gripper2F1.initalise();
		gripper2F1.setSpeed(189);
//		gripper2F1.open();
//		mF.setLEDBlue(true);
//		ThreadUtil.milliSleep(10000);
		mF.setLEDBlue(false);
		gripper2F1.close();
		ThreadUtil.milliSleep(200);
	}
	
	
	IMotionContainer m1;
	@Override
	public void run() {
		// Move to bottom left
		gripper.move(ptp(getApplicationData().getFrame("/bottom_left")).setJointVelocityRel(0.2));
		path = getPath(); // have a file here probably
		Position current_pos = new Position(0, 0);
		
		penDown();
		ThreadUtil.milliSleep(300);
		penUp();
		ThreadUtil.milliSleep(300);
		penDown();
		ThreadUtil.milliSleep(300);
		penUp();
		ThreadUtil.milliSleep(300);
		penDown();
		ThreadUtil.milliSleep(300);
		penUp();
		ThreadUtil.milliSleep(300);
//		current_pos = springyMove(current_pos, path.get(0));
//		penDown();
//		for (Position position:path){
//			current_pos = springyMove(current_pos, position);
//		}
//		penUp();
		
		
		mF.setLEDBlue(true);
//		ThreadUtil.milliSleep(120000);
	}
	
	private List<Position> getPath(){
		// TODO: Take in a file and return the points here.

		// temp path
//		Position[] path = {new Position(150,150), new Position(100,150), new Position(100,100), new Position(50,100), new Position(50,200), new Position(100,200), new Position(100,250), new Position(200,250), new Position(200,200), new Position(150,200), new Position(150,150),new Position(150,50), new Position(200,50), new Position(200,100), new Position(250,100), new Position(250,150), new Position(150,150)};
//		Position[] path = {new Position(228.89640795417085,0.8663461186619658),new Position(228.9612505609688,1.114304627970406),new Position(229.3030866772847,1.860212195384259),new Position(229.6560437682062,2.5239184906928185),new Position(230.00900085912767,3.1876247860013778),new Position(231.19255035842502,5.485615292991276),new Position(232.28615376664476,7.630564061781498),new Position(233.37975717486452,9.775512830571767),new Position(234.4236335993647,11.90443213296398),new Position(234.60587915442298,12.361495844875346),new Position(234.78812470948128,12.818559556786711),new Position(235.45932088845237,14.290219095915402),new Position(236.09742621880315,15.631850376272439),new Position(236.73553154915393,16.9734816566295),new Position(237.25761772853184,18.12323892804304),new Position(237.25761772853184,18.18686653496923),new Position(237.25761772853184,18.2504941418954),new Position(237.68582657202305,19.209582525204368),new Position(238.20919293629007,20.318174053433612),new Position(238.73255930055706,21.426765581662853),new Position(239.67661910207724,23.50242382271468),new Position(240.3071036063348,24.93074792243767),new Position(240.93758811059243,26.359072022160664),new Position(241.8649886853838,28.42872728933592),new Position(242.36799377253783,29.529981849493787),new Position(242.8709988596919,30.63123640965168),new Position(243.28254847645428,31.584074902889366),new Position(243.28254847645428,31.647400723355354),new Position(243.28254847645428,31.710726543821316),new Position(243.64503984624181,32.539270722629425),new Position(244.08808485375994,33.48861000959561),new Position(244.53112986127798,34.4379492965618),new Position(245.1856121628149,35.85634472370342),new Position(245.5424899682863,36.640599847688115),new Position(246.18519242183658,38.05296756758178),new Position(246.1977742328242,38.065179643239134),new Position(246.8664549760222,37.92565816385412),new Position(247.23775792480555,37.84818511376072),new Position(247.96225761772854,37.73405895055531),new Position(248.4764542936288,37.672044467842085),new Position(248.99065096952904,37.61002998512884),new Position(249.51330962838918,37.476759989735584),new Position(249.63791797998465,37.37588892252373),new Position(249.78070730232616,37.260300270987635),new Position(249.92186891971429,35.44410771154276),new Position(250.01969144911237,32.463972022925205),new Position(250.10505850553722,29.863288795357892),new Position(250.2587707070287,24.41655124653739),new Position(250.36127411909354,20.360110803324098),new Position(250.4637775311584,16.303670360110807),new Position(250.65387699236535,12.330332409972304),new Position(250.78371736622015,11.530470914127424),new Position(250.91355774007494,10.730609418282567),new Position(251.03185446975098,8.533587257617738),new Position(251.04659898772246,6.648199445983379),new Position(251.06134350569394,4.7628116343490206),new Position(250.99037893785737,2.5891620498615144),new Position(250.88889994808562,1.8178670360110802),new Position(250.70439269395527,0.4155124653739612),new Position(256.5216531175238,0.4155124653739612),new Position(262.3389135410922,0.4155124653739612),new Position(262.45105293953577,1.5062326869806093),new Position(262.5127296086797,2.106128808864275),new Position(262.5794615955586,5.165003484584791),new Position(262.59934624371107,8.303731966359534),new Position(262.6192308918636,11.442460448134275),new Position(262.6853755770656,14.091211161228703),new Position(262.74633443304884,14.189844662124923),new Position(262.8072932890321,14.288478163021145),new Position(262.9876168733094,15.039333404198153),new Position(263.14705350922054,15.858411864740482),new Position(263.3064901451317,16.677490325282786),new Position(263.53621832013334,17.908587257617736),new Position(263.65756056477966,18.594182825484765),new Position(263.77890280942603,19.27977839335179),new Position(263.96355549013145,20.214681440443204),new Position(264.06789985523625,20.671745152354568),new Position(264.17224422034093,21.128808864265935),new Position(264.3902326189255,22.344182825484754),new Position(264.5523185187574,23.372576177285318),new Position(264.7144044185893,24.40096952908588),new Position(264.94715745660176,25.990304709141277),new Position(265.0695474921184,26.904432132963986),new Position(265.191937527635,27.818559556786695),new Position(265.39096498207317,29.407894736842096),new Position(265.5118307242032,30.43628808864266),new Position(265.63269646633324,31.464681440443222),new Position(265.82970406186945,32.86703601108034),new Position(265.9496253809504,33.55263157894736),new Position(266.0695467000313,34.238227146814395),new Position(266.2539701816738,34.887984764542935),new Position(266.35945534015593,34.996537396121894),new Position(266.4792515314628,35.119817220569466),new Position(266.5524407500004,35.080823222356315),new Position(266.5544278617418,34.8926592797784),new Position(266.5561775901319,34.72697368421053),new Position(266.64597641975956,34.451632700681834),new Position(266.75398081647,34.280790427492384),new Position(266.9223399218063,34.01447856294013),new Position(266.9935622424078,34.0292610291537),new Position(267.2532590212388,34.38441753667437),new Position(267.5462378240898,34.785089924166286),new Position(267.560596368774,34.77824753832158),new Position(267.6913530656128,34.1756492698468),new Position(267.7657061741061,33.83298953985211),new Position(267.911556285724,33.34227839335179),new Position(268.0154644247636,33.08518005540166),new Position(268.11937256380327,32.82808171745153),new Position(268.29988293775295,32.61772853185595),new Position(268.4165985890963,32.61772853185595),new Position(268.54749164021086,32.61772853185595),new Position(268.6288088642659,33.44894011475187),new Position(268.6288088642659,34.786907826653405),new Position(268.6288088642659,36.0089229259436),new Position(268.5380928660695,37.012152691659615),new Position(268.4210526315789,37.084487534626035),new Position(268.3067867036011,37.155107761872394),new Position(268.21329639889194,37.53018749621353),new Position(268.21329639889194,37.91799805538415),new Position(268.21329639889194,38.30580861455477),new Position(268.3217933017601,38.861232926022495),new Position(268.4544006274878,39.152274303090195),new Position(268.5870079532155,39.44331568015789),new Position(268.77398856263386,39.6814404432133),new Position(268.8699130928618,39.6814404432133),new Position(268.9658376230897,39.6814404432133),new Position(269.04765159722797,39.424342105263165),new Position(269.0517219242802,39.1101108033241),new Position(269.0557922513324,38.79587950138503),new Position(269.1907037584182,37.98783780039337),new Position(269.35152527335987,37.314462578898194),new Position(269.51234678830156,36.64108735740299),new Position(269.74274228248623,35.99132973967444),new Position(269.863515260437,35.87055676172367),new Position(269.98428823838776,35.74978378377289),new Position(270.08310249307476,35.48708598189196),new Position(270.08310249307476,35.28678386865492),new Position(270.08310249307476,35.08648175541791),new Position(270.19159939594294,34.684473445168614),new Position(270.32420672167063,34.393432068100914),new Position(270.4629616104768,34.08889825979586),new Position(270.737826784031,33.86426592797784),new Position(270.9717063125209,33.86426592797784),new Position(271.29418392765456,33.86426592797784),new Position(271.3505493908965,33.96079133743756),new Position(271.2446719680441,34.331717451523545),new Position(271.17128562934187,34.58881578947367),new Position(271.0538690692885,35.24324792243768),new Position(270.98374627903655,35.78601108033241),new Position(270.8973869268276,36.454448182596),new Position(270.9317203888346,36.772853185595565),new Position(271.0901570000014,36.772853185595565),new Position(271.21880568678404,36.772853185595565),new Position(271.46078330543145,36.44563711911356),new Position(271.6278850414401,36.04570637119113),new Position(271.8841734154413,35.43232195313326),new Position(272.0343530668807,35.3185595567867),new Position(272.58780377240527,35.3185595567867),new Position(273.11073941935217,35.3185595567867),new Position(273.217344823676,35.38776427340203),new Position(273.1130561818018,35.65953611772524),new Position(273.0410914409477,35.84707322624143),new Position(272.9229618934869,37.43640840629685),new Position(272.8505460763334,39.19139207340391),new Position(272.7534707200897,41.543995018214765),new Position(272.78200561310825,42.38227146814404),new Position(272.9591634688078,42.38227146814404),new Position(273.0913188518222,42.38227146814404),new Position(273.19944598337946,42.28878116343489),new Position(273.19944598337946,42.17451523545706),new Position(273.19944598337946,42.06024930747923),new Position(273.3333152919417,41.96675900277008),new Position(273.49693333574,41.96675900277008),new Position(273.6605513795382,41.96675900277008),new Position(273.97590077009016,42.22385734072021),new Position(274.1977097591887,42.538088642659275),new Position(274.44568016999773,42.88938218286956),new Position(274.64958261186376,43.62950360906229),new Position(274.7271479234437,44.45983379501385),new Position(274.79652992468533,45.20256232686981),new Position(274.9445855713628,47.165858725761765),new Position(275.05616047161567,48.82271468144044),new Position(275.16773537186856,50.47957063711912),new Position(275.35656071764646,52.338764620454604),new Position(275.4757723511221,52.95425686663044),new Position(275.5949839845977,53.56974911280628),new Position(275.6925207756233,56.70229153297054),new Position(275.6925207756233,59.91546224477328),new Position(275.6925207756233,63.17284638182159),new Position(275.6009771618404,66.07678473877755),new Position(275.4856107403331,66.47904394194369),new Position(275.37181022092346,66.87584316358469),new Position(275.22677926326134,68.09059991239549),new Position(275.1633197233061,69.17850338374544),new Position(275.09986018335087,70.26640685509543),new Position(274.95447724634136,71.76419667590027),new Position(274.8402465299516,72.50692520775623),new Position(274.72601581356196,73.2496537396122),new Position(274.54331912188127,74.41828254847645),new Position(274.43425388177235,75.10387811634348),new Position(274.3251886416635,75.7894736842105),new Position(273.99830809239324,77.61229128470839),new Position(273.7078526611718,79.15458389522762),new Position(273.4173972299504,80.69687650574686),new Position(273.0906927463292,82.04781140879469),new Position(272.98184269756916,82.15666145755615),new Position(272.87299264880915,82.2655115063176),new Position(272.78438996162765,82.92018698061197),new Position(272.7849478371658,83.611495844877),new Position(272.78577623828943,84.63803492167067),new Position(272.91905747107694,85.1277748935869),new Position(273.51209465157024,86.28338635052123),new Position(274.18233239958,87.58943333365578),new Position(274.2382271468144,87.84152804423907),new Position(274.2382271468144,89.55836602734497),new Position(274.2382271468144,90.58137393575873),new Position(274.1576873529897,91.58071988411837),new Position(274.0592498272039,91.77913480147748),new Position(273.9608123014181,91.97754971883661),new Position(273.585569571119,92.7475761772853),new Position(273.2253770932058,93.49030470914127),new Position(272.86518461529255,94.23303324099723),new Position(272.1538829448909,95.49515235457062),new Position(271.64470671453546,96.2950138504155),new Position(271.13553048418004,97.09487534626038),new Position(270.61364692576586,97.98303324099723),new Position(270.4849654736151,98.26869806094182),new Position(270.3562840214644,98.55436288088642),new Position(270.1111777780489,99.30228531855956),new Position(269.9402849326918,99.93074792243766),new Position(269.76939208733467,100.55921052631578),new Position(269.4856862442238,101.63434903047091),new Position(269.30982750355656,102.31994459833794),new Position(269.13396876288937,103.00554016620497),new Position(268.85842870221427,103.82594469167326),new Position(268.697516257612,104.14306576604521),new Position(268.53660381300966,104.46018684041717),new Position(267.9791092677898,105.90928656340887),new Position(267.4586394904567,107.36328737269342),new Position(266.93816971312356,108.81728818197796),new Position(266.281017540988,110.70810249307479),new Position(265.9983013301554,111.56509695290858),new Position(265.71558511932284,112.42209141274238),new Position(265.36012055869764,113.82444598337949),new Position(265.20838008432173,114.68144044321329),new Position(265.05663960994576,115.53843490304709),new Position(264.83022400245727,117.03427977839335),new Position(264.7052342899029,118.00554016620498),new Position(264.5802445773484,118.9768005540166),new Position(264.3356675980635,121.22056786703601),new Position(264.16172989149186,122.99168975069252),new Position(263.98779218492024,124.76281163434902),new Position(263.75145815306803,127.14681440443212),new Position(263.6365431540425,128.28947368421052),new Position(263.521628155017,129.43213296398892),new Position(263.18304713051003,131.95637119113573),new Position(262.88414087736027,133.89889196675898),new Position(262.5852346242105,135.84141274238226),new Position(262.2225353951936,137.89819944598338),new Position(262.0781425906559,138.46952908587258),new Position(261.93374978611826,139.04085872576175),new Position(261.6081198979106,140.11599722991687),new Position(261.35452061686107,140.85872576177283),new Position(261.10092133581156,141.60145429362882),new Position(260.5315315396785,142.94217455785173),new Position(260.08920995878765,143.83810412671266),new Position(259.6468883778968,144.73403369557366),new Position(259.0388801221404,145.7624270473742),new Position(258.7380805015514,146.12342268626946),new Position(258.4372808809623,146.48441832516474),new Position(257.4778328931077,147.31718044436153),new Position(256.6059738618745,147.97400517337346),new Position(255.73411483064132,148.6308299023854),new Position(254.8762410273694,149.16839915446297),new Position(254.69958763238137,149.1686035113236),new Position(254.5229342373933,149.16880786818422),new Position(253.68303456945327,149.5976962859919),new Position(252.833143925848,150.1216888842295),new Position(251.98325328224266,150.6456814824671),new Position(250.7721784598594,151.2881961849189),new Position(250.1418665427741,151.5494993341224),new Position(249.5115546256888,151.8108024833259),new Position(248.66149861454272,152.0844477943619),new Position(248.25285318467175,152.15760002531349),new Position(247.84420775480078,152.2307522562651),new Position(247.34574759776467,152.4106070924022),new Position(247.1451639468138,152.55727743895144),new Position(246.91485689353442,152.72568206792832),new Position(246.67361243124006,153.39458946461187),new Position(246.49049514462084,154.37250171394632),new Position(246.33101095436567,155.22420471864427),new Position(246.0978241511551,156.71572022160666),new Position(245.97230224859732,157.68698060941827),new Position(245.84678034603957,158.6582409972299),new Position(245.66956621788353,160.060595567867),new Position(245.57849307491722,160.80332409972297),new Position(245.48741993195097,161.54605263157896),new Position(245.3589797939228,162.38746537396122),new Position(245.2930705459658,162.67313019390582),new Position(245.22716129800884,162.9587950138504),new Position(245.0210032090448,163.84695290858724),new Position(244.83494145937914,164.64681440443212),new Position(244.6488797097134,165.446675900277),new Position(244.3725346576461,166.47506925207753),new Position(244.22084134367407,166.93213296398892),new Position(244.069148029702,167.38919667590028),new Position(243.77927858668644,168.18386426592795),new Position(243.57668702586167,168.69806094182823),new Position(243.3740954650369,169.21225761772854),new Position(242.83668452654396,170.24065096952907),new Position(242.38244049587738,170.98337950138503),new Position(241.92819646521076,171.726108033241),new Position(240.79963742469906,173.11082402284921),new Position(239.87453151696243,174.06052614495883),new Position(238.9494256092259,175.01022826706847),new Position(237.58244180824474,176.19546141132201),new Position(236.83678973700435,176.69437757663334),new Position(236.09113766576394,177.19329374194467),new Position(235.06274431396338,177.7471409854877),new Position(234.55147117744758,177.92514922895123),new Position(234.04019804093173,178.1031574724147),new Position(233.14936315198676,178.25016117026644),new Position(232.57183809090319,178.25182411306622),new Position(231.76710155272823,178.25414129533593),new Position(231.30024394242585,178.1143456958474),new Position(230.57345356914135,177.65342889348875),new Position(230.05186714325586,177.32264857992138),new Position(229.3791314150918,176.72950954357756),new Position(229.0784852843323,176.33534214605803),new Position(228.6098492677319,175.72092865408774),new Position(228.53196676207074,175.41397290379768),new Position(228.53263256103284,174.18399081489616),new Position(228.53320277052995,173.13059856223975),new Position(228.64056573968185,172.57356752618688),new Position(228.93660702980964,172.08805104479453),new Position(229.15836585469208,171.72436000585813),new Position(229.82461850880557,171.04357150050518),new Position(230.41716848339513,170.5751876995658),new Position(231.0097184579847,170.10680389862637),new Position(232.1591942164356,169.33539719703418),new Position(232.9715590577305,168.86095058491645),new Position(233.78392389902538,168.38650397279875),new Position(234.88125984012223,167.59360470009278),new Position(235.41008337127906,167.09895220112543),new Position(235.9389069024359,166.60429970215804),new Position(236.65574880967708,165.66323024799712),new Position(237.00306538737055,165.0076867474345),new Position(237.35038196506403,164.35214324687183),new Position(237.8690743898742,163.1127512754071),new Position(238.15571522028208,162.25348236640176),new Position(238.44235605069,161.3942134573964),new Position(239.00710642277716,159.43091705850443),new Position(239.41071604714256,157.89060147997517),new Position(239.8143256715079,156.3502859014459),new Position(240.28944731682714,154.57583102493072),new Position(240.46654192562968,153.94736842105263),new Position(240.7787190479702,152.83953318821355),new Position(240.77518173659888,152.7936287627026),new Position(240.3504743798068,152.44113573407202),new Position(240.10954262080165,152.2411703601108),new Position(239.6870437816639,152.0775623268698),new Position(239.41158807061174,152.0775623268698),new Position(239.0583598711821,152.07756232686978),new Position(238.84435120898272,152.24594023065444),new Position(238.68542692262687,152.64889196675898),new Position(238.56149400228733,152.96312326869807),new Position(238.20041146068687,153.78116343490305),new Position(237.88302127462578,154.46675900277006),new Position(237.56563108856471,155.1523545706371),new Position(237.23607071379647,155.9470221606648),new Position(237.15066488625186,156.2326869806094),new Position(237.0652590587072,156.518351800554),new Position(236.66909039979615,157.40650969529085),new Position(236.27029008867166,158.20637119113573),new Position(235.87148977754723,159.0062326869806),new Position(235.03077522001354,160.4553324099723),new Position(234.40203551637464,161.4265927977839),new Position(233.77329581273568,162.39785318559555),new Position(232.40564690023146,164.0634120377179),new Position(231.36281571080966,165.12783469138913),new Position(230.23783028942313,166.2761125523895),new Position(228.66411886167913,167.59670030031302),new Position(227.49307479224376,168.3751469715207),new Position(226.4075484764543,169.09674607192184),new Position(224.86495844875344,170.00853690855357),new Position(224.06509695290856,170.4013488307022),new Position(223.2652354570637,170.79416075285093),new Position(222.19009695290856,171.23571669769666),new Position(221.6759002770083,171.38258426369273),new Position(221.16170360110803,171.5294518296888),new Position(220.36391036955578,171.78018385838632),new Position(219.90302642911448,171.9397665496872),new Position(219.4221395524297,172.10627532827286),new Position(218.2516278387201,172.22991689750694),new Position(217.15618017858782,172.2299168975069),new Position(215.56361747957484,172.22991689750688),new Position(215.04954057454867,172.14245620305678),new Position(214.05384307371892,171.70211151477653),new Position(213.39743916338932,171.41181855427484),new Position(212.78615608134479,171.06122991161556),new Position(212.69543622473108,170.92302564220037),new Position(212.60471636811738,170.7848213727852),new Position(212.58401471979198,170.4380193905817),new Position(212.64943256178583,170.1523545706371),new Position(212.71485040377965,169.8666897506925),new Position(213.34684033734231,169.03976580446658),new Position(214.05385463636955,168.3147458012462),new Position(214.76086893539673,167.5897257980258),new Position(216.04051246537395,166.47183857272196),new Position(216.89750692520775,165.8305519672377),new Position(217.75450138504155,165.18926536175348),new Position(220.49128111802744,163.6183098609793),new Position(222.9792396651764,162.33953974329515),new Position(226.36697422821757,160.5982994276849),new Position(227.84202809321718,159.7166780152633),new Position(228.85381340487785,158.82837983201173),new Position(229.59687041456468,158.17601199849005),new Position(230.6104460880536,157.0680050188973),new Position(231.1062037904088,156.36614209958347),new Position(231.60196149276393,155.6642791802696),new Position(232.49867791587937,154.12718596332482),new Position(233.09890695288743,152.95037939526168),new Position(233.6991359898955,151.77357282719854),new Position(234.1558442953321,150.78113113238112),new Position(234.113814298302,150.74495340677856),new Position(234.0717843012719,150.70877568117598),new Position(233.6166897506925,150.42224272036628),new Position(233.10249307479222,150.10821349386808),new Position(232.58829639889197,149.7941842673699),new Position(231.71890019517886,149.10380047742277),new Position(231.1705015109854,148.57402729398555),new Position(230.55089182500654,147.97546167869368),new Position(229.7529240864666,146.8242775695833),new Position(229.06271584455484,145.5332409972299),new Position(228.45183241221153,144.3905817174515),new Position(227.51420887149666,142.38054016620498),new Position(226.97910797629956,141.06648199445982),new Position(226.4440070811025,139.75242382271466),new Position(225.8732931794727,138.52968837211645),new Position(225.71085486156667,138.34929210424156),new Position(225.54841654366066,138.16889583636663),new Position(225.41551246537395,137.9117974984165),new Position(225.41551246537395,137.77796246435236),new Position(225.41551246537395,137.6441274302882),new Position(225.55574792243766,137.53462603878114),new Position(225.72714681440442,137.53462603878114),new Position(225.89854570637118,137.53462603878114),new Position(226.0387811634349,137.62811634349032),new Position(226.0387811634349,137.74238227146813),new Position(226.0387811634349,137.85664819944597),new Position(226.17180713924887,137.95013850415512),new Position(226.33439444302155,137.95013850415512),new Position(226.5739758818246,137.95013850415512),new Position(226.6078929819509,137.65773084629805),new Position(226.51333457888347,136.40745160494703),new Position(226.40732891914635,135.00581334186705),new Position(226.44613642164146,134.78034202443055),new Position(226.93778267943674,133.94141111632692),new Position(227.26276882968384,133.38686417973364),new Position(227.76396705495185,132.88278621413477),new Position(228.1925951313574,132.67938887426075),new Position(228.58512529556089,132.49312111530102),new Position(228.99549913195042,132.3407202216067),new Position(229.10453699000075,132.3407202216067),new Position(229.21357484805108,132.3407202216067),new Position(229.90062302565417,131.79291265450178),new Position(230.6313107180076,131.12337007248465),new Position(231.36199841036102,130.4538274904675),new Position(232.053324099723,129.89693745661492),new Position(232.1675900277008,129.88583666392333),new Position(232.28185595567865,129.87473587123174),new Position(232.45122750779825,129.51101296742254),new Position(232.5439712546332,129.07756354434733),new Position(232.6367150014681,128.64411412127208),new Position(232.79920723898783,127.72853185595567),new Position(232.90506511578812,127.04293628808864),new Position(233.0109229925884,126.35734072022161),new Position(233.15783660298158,124.8860664532955),new Position(233.2315398055508,123.77343791714173),new Position(233.32994911376932,122.28784433734802),new Position(233.29625682360032,121.66698903999635),new Position(233.10470258246193,121.4361802994132),new Position(232.96123890719377,121.26331714581627),new Position(232.6977244613601,121.12188365650968),new Position(232.5191149250537,121.12188365650968),new Position(232.34050538874737,121.12188365650967),new Position(231.97486941907923,120.91567327307249),new Position(231.70659054801345,120.6636383599826),new Position(231.27057663899546,120.25402456062244),new Position(230.94945630210813,120.19680497531996),new Position(228.6807350311088,120.12446915151455),new Position(227.28479336787706,120.07996099994699),new Position(225.1142659279778,120.14989840256305),new Position(223.8573407202216,120.27988560177245),new Position(222.60041551246536,120.40987280098183),new Position(220.49688365650968,120.60627341187335),new Position(219.18282548476452,120.71633140375353),new Position(217.86876731301936,120.82638939563375),new Position(215.25103878116343,121.0144809725016),new Position(213.36565096952907,121.13431268568212),new Position(211.4802631578947,121.25414439886264),new Position(208.11461218836564,121.44604660827692),new Position(205.88642659279776,121.56076203993607),new Position(203.6582409972299,121.67547747159522),new Position(197.183781684878,121.81755453655916),new Position(191.49873923201574,121.87648885096705),new Position(184.90933026303617,121.94479833205892),new Position(180.35288876393398,121.90349548903963),new Position(178.9294871544534,121.76255216473253),new Position(177.07534831151304,121.57895781545655),new Position(176.6483354177374,121.47064877839645),new Position(176.41164015369478,121.12391668535511),new Position(176.25487049307458,120.89426666353447),new Position(175.99591432502032,120.70637119113574),new Position(175.8361820024631,120.70637119113573),new Position(175.6764496799059,120.70637119113573),new Position(175.1502836329039,120.96032061187319),new Position(174.66692412023644,121.270703237219),new Position(174.183564607569,121.58108586256476),new Position(173.28913474511202,122.04140491761594),new Position(172.6793022036654,122.29363447066599),new Position(172.0694696622188,122.54586402371606),new Position(171.39166495307754,122.914091417996),new Position(171.1730695166848,123.11191756906585),new Position(170.9544740802921,123.3097437201357),new Position(170.77562326869804,123.55683980185893),new Position(170.77562326869804,123.66101997289522),new Position(170.77562326869804,123.76520014393155),new Position(170.55039028728967,124.1480441045374),new Position(170.275105532235,124.51178432979717),new Position(169.99982077718033,124.87552455505691),new Position(169.52142434098528,125.71069944598337),new Position(169.21200234069047,126.36772853185595),new Position(168.762101367674,127.32305176275912),new Position(168.5517199766689,127.56232686980606),new Position(168.16165797711636,127.56232686980606),new Position(167.89339057744547,127.56232686980606),new Position(167.5802208621669,127.38728753991018),new Position(167.46572527649735,127.17335058114853),new Position(167.34166451694168,126.94154093149443),new Position(167.32751798053818,126.54041537767968),new Position(167.43071360186661,126.18059327464954),new Position(167.52595276648924,125.84851371483673),new Position(167.80084554316676,125.19071950629522),new Position(168.0415864389278,124.71882836677953),new Position(168.28232733468883,124.24693722726383),new Position(168.53745184554793,123.49716504297999),new Position(168.60852979639256,123.05266795725987),new Position(168.708453938865,122.4277766992213),new Position(168.65548620144753,122.17609003073443),new Position(168.37497429208125,121.94288283799796),new Position(168.16740657096335,121.77031873669486),new Position(167.29224197490754,121.578093473047),new Position(166.3295002771514,121.49360531514482),new Position(165.40402304715582,121.41238740744954),new Position(162.76774735334328,121.28319850512747),new Position(160.47110984645695,121.20651886554023),new Position(157.05460254563752,121.09244925390651),new Position(156.21231570139017,121.00442674608964),new Position(155.83839946520143,120.72238120088069),new Position(155.53780896188127,120.49564535956577),new Position(155.42802326504213,120.25614621273184),new Position(155.51763355313372,120.02262554522211),new Position(155.5925655043007,119.82735601058539),new Position(155.75337243994886,119.66759002770083),new Position(155.8749822990186,119.66759002770083),new Position(155.99659215808833,119.66759002770085),new Position(156.27040118533563,119.50984159901117),new Position(156.4834468040126,119.31703796394604),new Position(156.8174767242016,119.01474504080169),new Position(157.30594567265672,118.97425241706898),new Position(160.03166162497882,119.02290150323024),new Position(163.19252077562325,119.07931710626926),new Position(162.7250692520776,118.58097755146548),new Position(162.46797091412745,118.30689079632337),new Position(162.2576177285319,117.96851138319),new Position(162.25761772853187,117.829023300058),new Position(162.25761772853184,117.68953521692598),new Position(162.4040909706897,117.3518621801696),new Position(162.58311382221598,117.07863877393272),new Position(162.85382839308815,116.66547611597568),new Position(163.0286569551064,116.60134989704368),new Position(163.6218949856509,116.69761917656332),new Position(164.0627757832748,116.7691642808149),new Position(164.33518005540165,116.72832830660919),new Position(164.33518005540165,116.59069100512819),new Position(164.33518005540165,116.46821788315513),new Position(164.2416897506925,116.310232415612),new Position(164.12742382271466,116.23961218836564),new Position(164.01315789473685,116.1689919611193),new Position(163.9196675900277,115.93373434708974),new Position(163.9196675900277,115.71681749052217),new Position(163.9196675900277,115.49990063395461),new Position(164.24688089946872,115.06133920337331),new Position(164.6468082776744,114.74223653367486),new Position(165.26918816375203,114.24563866606938),new Position(165.373949848017,114.03701170736176),new Position(165.37395509207886,113.29416485090675),new Position(165.3739600186105,112.59629769839148),new Position(165.48588415844597,112.33706072516337),new Position(165.94529085872574,111.97084572546851),new Position(166.48847703429442,111.5378461087912),new Position(166.65989631697397,111.52068851602323),new Position(169.42520775623268,111.62253603673015),new Position(171.02493074792244,111.68145447109107),new Position(172.61426592797784,111.84450978885752),new Position(172.95706371191136,111.9848811873223),new Position(173.29986149584485,112.12525258578707),new Position(173.7910237863832,112.33793051552274),new Position(174.04853546866323,112.45749880895714),new Position(174.4299046513992,112.63457684263885),new Position(174.6057770035847,112.59124840086713),new Position(174.99682865869804,112.22387444585307),new Position(175.26087823093715,111.97581275271146),new Position(175.57145943513166,111.77285318559557),new Position(175.68700911246358,111.77285318559557),new Position(175.8025587897955,111.77285318559554),new Position(176.10409843803686,111.55251284386895),new Position(176.35709721966657,111.2832079817587),new Position(176.81709500444788,110.79356277792185),new Position(187.9757220174594,110.6571327013731),new Position(194.11296687461572,110.58209615927129),new Position(200.02250692520775,110.43000784300499),new Position(201.10803324099723,110.31915866522574),new Position(202.1935595567867,110.2083094874465),new Position(203.68940443213293,110.02910336382392),new Position(204.43213296398892,109.92092283495333),new Position(205.17486149584488,109.81274230608275),new Position(206.90443213296396,109.56927404886981),new Position(208.27562326869804,109.37988226336903),new Position(209.64681440443212,109.19049047786824),new Position(211.51662049861494,108.94856866813048),new Position(212.43074792243766,108.84227824172955),new Position(213.34487534626038,108.73598781532861),new Position(215.21468144044323,108.56426116973572),new Position(216.58587257617728,108.46066347374534),new Position(217.95706371191133,108.35706577775497),new Position(219.35941828254843,108.21682896035823),new Position(219.70221606648198,108.14902610175258),new Position(220.04501385041553,108.08122324314695),new Position(222.6735761735933,107.94282865919726),new Position(225.5434656735438,107.84148258186435),new Position(229.5319062040393,107.70063646132618),new Position(230.9059285595744,107.5825024526668),new Position(231.37460594763377,107.34013995606321),new Position(231.81320863020787,107.1133296940921),new Position(232.06172830985955,106.76762575198805),new Position(232.24757263554207,106.12579739068426),new Position(232.39046666309255,105.63230134658353),new Position(232.58885560601308,104.94806094182825),new Position(232.68843695314322,104.60526315789473),new Position(232.78801830027334,104.26246537396122),new Position(233.19083839819598,102.62638504155125),new Position(233.5835927263046,100.96952908587257),new Position(234.01207188867696,99.16196593187863),new Position(234.4007265249946,96.79303309536104),new Position(234.5552969981817,95.04678446395393),new Position(234.69698001960546,93.44613087757735),new Position(234.82539416789368,90.31420566982109),new Position(234.8406617721555,88.08695066894008),new Position(234.85953584116587,85.33358060057097),new Position(234.7781644181385,83.63840349042718),new Position(234.58644023074774,82.79085872576177),new Position(234.43135077871162,82.10526315789474),new Position(234.03495206965795,80.44533317768781),new Position(233.70555421062846,79.10212543641305),new Position(233.37221130635444,77.74283071956471),new Position(232.7713071739546,75.99251661961378),new Position(232.35037459093533,75.15475701536042),new Position(231.93442365913359,74.32691212505623),new Position(231.13545873609175,72.8861334250825),new Position(230.5748969841757,71.95302657097434),new Position(230.01433523225964,71.01991971686617),new Position(229.33109104314354,69.70371788381934),new Position(229.0565765639177,69.02813360864803),new Position(228.7820620846918,68.35254933347672),new Position(228.40300542774466,67.15270399703687),new Position(228.21422843736846,66.36181063878172),new Position(228.02545144699224,65.57091728052657),new Position(227.79965471072575,64.03584801138986),new Position(227.7124579123318,62.95054559625572),new Position(227.61857591951178,61.782035336454996),new Position(227.63335856995636,60.85000778646792),new Position(227.74870476514303,60.66522703669894),new Position(227.88146475702027,60.452549966608316),new Position(227.7460046245229,59.691620666376096),new Position(227.32330907735596,58.275623268698055),new Position(226.9822088816329,57.13296398891966),new Position(226.49961064146535,55.68386426592797),new Position(226.25086854365034,55.05540166204986),new Position(226.00212644583533,54.42693905817175),new Position(225.6447521115546,53.58552631578946),new Position(225.45670335635984,53.18559556786703),new Position(225.2686546011651,52.78566481994461),new Position(224.63240518330974,51.61703601108034),new Position(224.04281576112567,50.58864265927978),new Position(223.4532263389416,49.56024930747921),new Position(222.35225861582154,47.70051553943187),new Position(221.59622082085886,46.45590095250788),new Position(220.54786769863946,44.73006714253813),new Position(220.22160664819944,44.00784700020225),new Position(220.22160664819944,43.413018444479064),new Position(220.22160664819944,42.79114690771659),new Position(220.3594557023758,42.512915645902034),new Position(220.9017565636816,42.04021998504595),new Position(221.2758390171968,41.71415162484961),new Position(222.08014638060828,41.21651922078274),new Position(222.6891062601516,40.934370198230646),new Position(223.76610182039374,40.435366479228406),new Position(223.80413490313558,40.43207858215569),new Position(224.08328958428547,40.81384535670409),new Position(224.3619434759588,41.19492726083453),new Position(224.40242993488198,41.190573089249284),new Position(225.4781795708994,40.663830005749055),new Position(226.08752811480676,40.36546120301126),new Position(227.0940019796942,40.05700696051668),new Position(227.71478815953822,39.97837613353885),new Position(228.33557433938222,39.89974530656105),new Position(229.0036295476977,39.69592669266376),new Position(229.19935528912822,39.52544588043376),new Position(229.51362675202324,39.25170950900159),new Position(229.52154092988414,39.150352098287144),new Position(229.26706724709584,38.65825425868548),new Position(229.1085830825475,38.35177967895393),new Position(228.5856507997008,36.93740315451351),new Position(228.10499550743643,35.51519531548454),new Position(227.62434021517205,34.09298747645559),new Position(227.1497908867182,32.84054709141269),new Position(227.05044144420566,32.731994459833686),new Position(226.9510920016931,32.623441828254684),new Position(226.86980609418282,32.36507493490338),new Position(226.86980609418282,32.15784580794194),new Position(226.86980609418282,31.950616680980488),new Position(226.78028196819622,31.618726099263068),new Position(226.6708635919904,31.42031118190326),new Position(226.56144521578457,31.221896264543453),new Position(225.96481103011635,29.610457063711905),new Position(225.34500984606103,27.8393351800554),new Position(224.72520866200574,26.068213296398895),new Position(223.98475654388452,23.91793628808864),new Position(223.69956069468054,23.060941828254848),new Position(223.41436484547654,22.20394736842105),new Position(222.98560368218673,20.848337950138507),new Position(222.7467581095921,20.048476454293628),new Position(222.50791253699737,19.248614958448748),new Position(221.87929645595503,16.911357340720215),new Position(221.34983348505347,14.854570637119112),new Position(220.8203705141519,12.797783933518009),new Position(220.31242565775986,10.834487534626057),new Position(220.22106713751555,10.49168975069252),new Position(220.1297086172712,10.148891966758983),new Position(219.86825833157883,9.35422437673132),new Position(219.64006650264352,8.725761772853184),new Position(219.41187467370827,8.09729916897505),new Position(218.94355020700954,6.928670360110784),new Position(218.59934546553518,6.1288088642659275),new Position(218.25514072406085,5.328947368421071),new Position(217.7385663021935,3.926592797783952),new Position(217.4514023058299,3.0124653739612186),new Position(217.16423830946633,2.098337950138485),new Position(216.86909042228723,1.1400623268697965),new Position(216.7955181120985,0.8829639889196675),new Position(216.66175027539177,0.4155124653739612),new Position(222.72013129041954,0.4155124653739612),new Position(228.7620059215076,0.4155124653739612),new Position(228.77883351846415,0.4167407858370839),new Position(228.89640795417085,0.8663461186619658)};
		Position[] path = {new Position(0.0,112.18836565096952),new Position(0.0,224.37673130193903),new Position(150.0,224.37673130193903),new Position(300.0,224.37673130193903),new Position(300.0,112.18836565096952),new Position(300.0,0.0),new Position(150.0,0.0),new Position(0.0,0.0),new Position(0.0,112.18836565096952)};
		return Arrays.asList(path);
	}

	private Position springyMove(Position current_pos, Position next_pos){
		double vel = 0.2;
		Position move_pos = next_pos.getRelDistance(current_pos);
		gripper.move(linRel(-move_pos.x, move_pos.y, 0).setMode(springRobot).setJointVelocityRel(vel));
		return next_pos;
	}
	
	private void penUp(){
		gripper.move(linRel(0,0, -20).setMode(springRobot).setJointVelocityRel(0.2));
	}
	private void penDown(){
		gripper.move(linRel(0,0, 20).setMode(springRobot).setJointVelocityRel(0.2));
	}
}
